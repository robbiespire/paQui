/*
 * ecart.js - Ecart behavioral utility library
 */
function jqnc(){return jQuery.noConflict()}function copyOf(c){var b=new Object(),a;for(a in c){b[a]=c[a]}return b}if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}function getCurrencyFormat(a){if(a&&a.currency){return a}if(sjss&&sjss.d){return{cpos:sjss.cp,currency:sjss.c,precision:parseInt(sjss.p,10),decimals:sjss.d,thousands:sjss.t,grouping:sjss.g}}return{cpos:true,currency:"$",precision:2,decimals:".",thousands:",",grouping:[3]}}function asMoney(b,a){a=getCurrencyFormat(a);b=formatNumber(b,a);if(a.cpos){return a.currency+b}return b+a.currency}function asPercent(d,a,b,c){a=getCurrencyFormat(a);a.precision=b?b:1;return formatNumber(d,a,c)+"%"}function formatNumber(e,l,a){l=getCurrencyFormat(l);e=asNumber(e);var c,k,o=fraction=0,j=false,h="",g=[],m=e.toFixed(l.precision).toString().split("."),b=l.grouping;e="";o=m[0];if(m[1]){fraction=m[1]}if(b.indexOf(",")>-1){b=b.split(",")}else{b=[b]}k=0;lg=b.length-1;while(o.length>b[Math.min(k,lg)]){if(b[Math.min(k,lg)]==""){break}j=o.length-b[Math.min(k++,lg)];h=o;o=h.substr(0,j);g.unshift(h.substr(j))}if(o){g.unshift(o)}e=g.join(l.thousands);if(e==""){e=0}fraction=(a)?new Number("0."+fraction).toString().substr(2,l.precision):fraction;fraction=(!a||a&&fraction.length>0)?l.decimals+fraction:"";if(l.precision>0){e+=fraction}return e}function asNumber(b,a){if(!b){return 0}a=getCurrencyFormat(a);if(b instanceof Number){return new Number(b.toFixed(a.precision))}b=b.toString().replace(a.currency,"");b=b.toString().replace(new RegExp(/(\D\.|[^\d\,\.])/g),"");b=b.toString().replace(new RegExp("\\"+a.thousands,"g"),"");if(a.precision>0){b=b.toString().replace(new RegExp("\\"+a.decimals,"g"),".")}if(isNaN(new Number(b))){b=b.replace(new RegExp(/\./g),"").replace(new RegExp(/\,/),".")}return new Number(b)}function CallbackRegistry(){this.callbacks=new Array();this.register=function(a,b){this.callbacks[a]=b};this.call=function(d,c,b,a){this.callbacks[d](c,b,a)};this.get=function(a){return this.callbacks[a]}}if(!Number.prototype.roundFixed){Number.prototype.roundFixed=function(a){var b=Math.pow(10,a||0);return String(Math.round(this*b)/b)}}function quickSelects(a){jQuery("input.selectall").mouseup(function(){this.select()})}function htmlentities(a){if(!a){return""}a=a.replace(new RegExp(/&#(\d+);/g),function(){return String.fromCharCode(RegExp.$1)});return a}jQuery.parseJSON=function(data){if(typeof(JSON)!=="undefined"&&typeof(JSON.parse)==="function"){try{return JSON.parse(data)}catch(e){return false}}else{return eval("("+data+")")}};jQuery(document).ready(function(){var a=jqnc();a("input.currency, input.money").change(function(){this.value=asMoney(this.value)}).change();quickSelects()});